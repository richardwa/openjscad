<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>tscad</title>
  <link rel='shortcut icon' type='image/x-icon' href="data:;base64,iVBORw0KGgo=">
  <style>
    * {
      font-family: consolas, monospace;
    }
  </style>
</head>

<body>
  <canvas width="640" height="480"></canvas>
</body>

</html>
<script id="vShader" type="x-shader/x-vertex">
	// vertex shader's code goes here
  attribute vec2 position;
  void main() {
  gl_Position = vec4(position, 0.0, 1.0);
}
</script>
<script id="fShader" type="x-shader/x-fragment">

  // fragment shaders don't have a default precision so we need
  // to pick one. mediump is a good default
  precision mediump float;
 
  void main() {
    // gl_FragColor is a special variable a fragment shader
    // is responsible for setting
    gl_FragColor = vec4(1, 0, 0.5, 1); // return reddish-purple
  }
</script>
<script>
  const canvas = document.querySelector("canvas");
  const gl = canvas.getContext("webgl");
  gl.clearColor(1, 0, 1, 1)
  gl.clear(gl.COLOR_BUFFER_BIT)

  var vertexShader = gl.createShader(gl.VERTEX_SHADER)
  gl.shaderSource(vertexShader, document.querySelector("#vShader").text);
  gl.compileShader(vertexShader)

  var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER)
  gl.shaderSource(fragmentShader, document.querySelector("#fShader").text);
  gl.compileShader(fragmentShader)

  var program = gl.createProgram()
  gl.attachShader(program, vertexShader)
  gl.attachShader(program, fragmentShader)
  gl.linkProgram(program)

  var vertices = new Float32Array([
    -1, -1, -1, 1, 1, 1,
    -1, -1, 1, -1, 1, 1,
  ])

  var buffer = gl.createBuffer()
  gl.bindBuffer(gl.ARRAY_BUFFER, buffer)
  gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW)

  gl.useProgram(program)
  program.color = gl.getUniformLocation(program, 'color')
  gl.uniform4fv(program.color, [0, 1, 0, 1.0])

  program.position = gl.getAttribLocation(program, 'position')
  gl.enableVertexAttribArray(program.position)
  gl.vertexAttribPointer(program.position, 2, gl.FLOAT, false, 0, 0)

  gl.drawArrays(gl.TRIANGLES, 0, vertices.length / 2)


</script>